# GENERAL BITS AND BOBS
# unbind -T root -aq
# unbind -T prefix -aq
# unbind -T nested -aq
# unbind -T popup -aq
# unbind -T copy-mode -aq

set -g mode-keys vi
set -g mouse on
set -g base-index 1
set -g renumber-windows on
set -g default-terminal 'screen-256color'
set -g history-file ~/._tmux-history
set -g set-clipboard external
set -g escape-time 500
set -g focus-events on

set -g prefix C-s
bind C-s send-prefix
unbind r
bind r {
  source-file ~/.tmux.conf
  display 'config reloaded'
}

# PANE NAVIGATION
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# WINDOW NAVIGATION
bind w kill-window
bind c new-window -c '#{pane_current_path}' -a -t '{next}'
bind -n M-c new-window -c '#{pane_current_path}' -a -t '{next}'
bind -n M-z resize-pane -Z

#

# Swap current window with window N using prefix + m + N while keeping focus
bind-key M-1 swap-window -t 1 \; select-window -t 1
bind-key M-2 swap-window -t 2 \; select-window -t 2
bind-key M-3 swap-window -t 3 \; select-window -t 3
bind-key M-4 swap-window -t 4 \; select-window -t 4
bind-key M-5 swap-window -t 5 \; select-window -t 5
bind-key M-6 swap-window -t 6 \; select-window -t 6
bind-key M-7 swap-window -t 7 \; select-window -t 7
bind-key M-8 swap-window -t 8 \; select-window -t 8
bind-key M-9 swap-window -t 9 \; select-window -t 9

# SESSIONS
bind S command-prompt -p "New Session:" "new-session -A -s '%%'"
bind W confirm-before -p "Kill Session(y/n): " kill-session


# LIST OF PLUGINS
# <prefix> I install plugins
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'catppuccin/tmux'

# Other examples:
# set -g @plugin 'github_username/plugin_name'
# set -g @plugin 'github_username/plugin_name#branch'
# set -g @plugin 'git@github.com:user/plugin'
# set -g @plugin 'git@bitbucket.com:user/plugin'
# Make the status line pretty and add some modules
set -g status-position top
set -g status-style "bg=#{@thm_surface_0}"
set -g status-justify "absolute-centre"
set -g status-right-length 100
set -g status-left-length 100
set -g status-left ""
set -g status-right ""

# Catppuccin colours
set -g @catppuccin_flavor 'mocha' # latte, frappe, macchiato or mocha
set -g @thm_base "#eff1f6"
set -g @thm_text "#ffffff"
set -g @thm_mantle "#dfafaf"
set -g @thm_crust "#d7875f"
set -g @thm_blue "#7e99d6"
set -g @thm_red "#E78284"
set -g @thm_lavender "#B4BEFE"
set -g @thm_mauve "#CA9EE6"
set -g @thm_sky "#85C1DC"
set -g @thm_green "#A6E3A1"
set -g @thm_peach "#ffd3ac"
set -g @thm_teal "#3EBB9E"
set -g @thm_yellow "#f9e2b0"
set -g @thm_codeblock "#51555d"
set -g @thm_sapphire "#74c7ed"
set -g @thm_rosewater "#f5e0dd"
set -g @thm_flamingo "#f2cdce"
set -g @thm_pink "#f5c2e8"
set -g @thm_maroon "#eba0ad"
set -g @thm_overlay_0 "#9ca0b1"
set -g @thm_overlay_1 "#8c8fa2"
set -g @thm_overlay_2 "#7c7f94"
set -g @thm_subtext_0 "#6c6f86"
set -g @thm_subtext_1 "#5c5f78"
set -g @thm_surface_0 "#262a35"
set -g @thm_surface_1 "#3c3f4a"
set -g @thm_surface_2 "#acb0bf"

set -g @catppuccin_window_current_number_color "#{@thm_surface_0}"
set -g @catppuccin_window_current_text_color "#{@thm_surface_0}"

set -g @catppuccin_window_number_color "#{@thm_surface_0}"
set -g @catppuccin_window_text_color "#{@thm_surface_0}"

set -g @catppuccin_pane_background_color "#{@thm_mantle}"
set -g @catppuccin_status_module_bg_color "#{@thm_surface_1}"
set -g @catppuccin_status_background "#{@thm_surface_0}"

set -g status-left "#{?client_prefix,#{#[bg=#{@thm_surface_0},fg=#{@thm_red},bold]   TMUX #S },#{#[bg=#{@thm_surface_0},fg=#{@thm_lavender}]   TMUX #S }}"
set -ga status-left " #{?client_prefix,#[fg=#{@thm_red} bold]PREFIX ,#{?#{==:#{pane_mode},copy-mode},#[fg=#{@thm_yellow} bold]COPY ,#[fg=#{@thm_teal} bold]NORMAL }}"
set -ga status-left "#[bg=#{@thm_codeblock},fg=#{@thm_crust}]  #{=/-32/...:#{s|$USER|~|:#{b:pane_current_path}}} "
set -ga status-right "#[bg=#{@thm_surface_0},fg=#{@thm_blue}] 󰭦 %a, %d %b %Y 󰅐 %H:%M "

set -g @catppuccin_window_status_style "custom"
set -g @catppuccin_window_status_separator ""
set -g @catppuccin_window_left_separator "#[fg=#{@_ctp_status_bg}]#[none]"
set -g @catppuccin_window_middle_separator "#[bg=#{@catppuccin_window_text_color},fg=#{@catppuccin_window_number_color, reverse} bold] :"
set -g @catppuccin_window_right_separator "#[fg=#{@_ctp_status_bg}]#[none]"
set -g @catppuccin_window_current_left_separator "#[fg=#{@thm_mantle}, bg=#{@_ctp_status_bg}]#[none]"
set -g @catppuccin_window_current_middle_separator "#[bg=#{@catppuccin_window_current_text_color},fg=#{@catppuccin_window_current_number_color, reverse} bold] :"
set -g @catppuccin_window_current_right_separator "#[fg=#{@_ctp_status_bg, reverse}]#[none]"
set -g @catppuccin_window_connect_separator "yes"

# pane border look and feel
setw -g pane-border-status top
setw -g pane-border-format ""
setw -g pane-active-border-style "bg=#{@thm_surface_0},fg=#{@thm_overlay_0}"
setw -g pane-border-style "bg=#{@thm_mantle},fg=#{@thm_crust}"
setw -g pane-border-lines single

# window content (icon)
set -g automatic-rename on
set -g allow-rename on

set -g @catppuccin_window_text "#[fg=#{@thm_text}]\
#{?#{==:#{pane_current_command},zsh},  ,\
#{?#{==:#{pane_current_command},fish}, 󰈺 ,\
#{?#{==:#{pane_current_command},nvim},  ,\
#{?#{==:#{pane_current_command},git}, 󰊢 ,\
#{?#{==:#{pane_current_command},lazygit}, 󰊢 ,\
#{?#{==:#{pane_current_command},htop}, ,\
#{?#{==:#{pane_current_command},yazi}, 󰇥 ,\
#{?#{==:#{pane_current_command},python}, 󰌠 ,\
#{?#{==:#{pane_current_command},bash},  ,\
#{?#{==:#{pane_current_command},ssh},  ,\
#{?#{==:#{pane_current_command},node},  ,\
#{?#{==:#{pane_current_command},cargo},  ,\
#{?#{==:#{pane_current_command},rustc},  ,\
#{?#{==:#{pane_current_command},lua},  ,\
#{?#{==:#{pane_current_command},docker},  ,\
 󰘧 }}}}}}}}}}}}}}}"
set -g @catppuccin_window_current_text "#[fg=#{@thm_mantle} bold]\
#{?#{==:#{pane_current_command},zsh},  ,\
#{?#{==:#{pane_current_command},fish}, 󰈺 ,\
#{?#{==:#{pane_current_command},nvim},  ,\
#{?#{==:#{pane_current_command},git}, 󰊢 ,\
#{?#{==:#{pane_current_command},lazygit}, 󰊢 ,\
#{?#{==:#{pane_current_command},htop}, ,\
#{?#{==:#{pane_current_command},yazi}, 󰇥 ,\
#{?#{==:#{pane_current_command},python}, 󰌠 ,\
#{?#{==:#{pane_current_command},bash},  ,\
#{?#{==:#{pane_current_command},ssh},  ,\
#{?#{==:#{pane_current_command},node},  ,\
#{?#{==:#{pane_current_command},cargo},  ,\
#{?#{==:#{pane_current_command},rustc},  ,\
#{?#{==:#{pane_current_command},lua},  ,\
#{?#{==:#{pane_current_command},docker},  ,\
 󰘧 }}}}}}}}}}}}}}}"
set -g @catppuccin_window_number "#[fg=#{@thm_text}]#I"
set -g @catppuccin_window_current_number "#[fg=#{@thm_mantle} bold]#I"

# Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf)
run '~/.tmux/plugins/tpm/tpm'
